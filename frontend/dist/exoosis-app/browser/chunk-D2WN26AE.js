import{a as q}from"./chunk-L2LK7ZFX.js";import{a as J}from"./chunk-YPH5V22R.js";import{a as z}from"./chunk-7CU3WMK2.js";import{a as H}from"./chunk-S3NPW5DK.js";import{a as G}from"./chunk-GAVR2D5O.js";import{Da as B,Gb as j,Ha as p,Hb as N,Ib as $,Jb as O,Kb as U,Na as c,Nb as L,O as b,Oa as e,Ob as R,Pa as t,Qa as C,Ua as S,Va as y,Ya as f,ab as v,bb as M,db as n,eb as g,fb as x,gb as E,k as I,o as D,ob as _,pa as k,pb as P,qb as w,ra as o,rb as F,sb as h,u as A,w as T}from"./chunk-JDCDSAQ7.js";function Q(a,r){if(a&1&&(S(0),C(1,"img",41),y()),a&2){let i=f().$implicit;o(),c("src",i.imageUrl,k)("alt",i.name)}}function V(a,r){if(a&1&&(n(0),_(1,"slice")),a&2){let i=f().$implicit;g(F(1,1,i.name,0,2))}}function W(a,r){if(a&1&&(e(0,"div",40),p(1,Q,2,2,"ng-container",5)(2,V,2,5,"ng-template",null,3,h),t()),a&2){let i=r.$implicit,s=v(3);o(),c("ngIf",i.imageUrl)("ngIfElse",s)}}function X(a,r){if(a&1&&(e(0,"div",44)(1,"div",45)(2,"span",26),n(3),t()(),e(4,"div")(5,"p",46),n(6),t(),e(7,"p",47),n(8),_(9,"date"),t()()()),a&2){let i=r.$implicit;o(),c("ngClass",i.accent),o(2),g(i.icon),o(3),g(i.title),o(2),E("",i.meta," \xB7 ",w(9,5,i.createdAt,"mediumDate"))}}function Y(a,r){if(a&1&&(e(0,"div",42),p(1,X,10,8,"div",43),t()),a&2){let i=f(2).ngIf;o(),c("ngForOf",i.data.recentActivity)}}function Z(a,r){a&1&&(e(0,"div",48),n(1,"No recent catalog updates yet."),t())}function tt(a,r){if(a&1&&(e(0,"div",54)(1,"div")(2,"p",55),n(3),t(),e(4,"p",56),n(5),t()(),e(6,"span",24),n(7,"Low stock"),t()()),a&2){let i=r.$implicit;o(3),g(i.name),o(2),E("",i.category||"Uncategorized"," \xB7 ",i.brand||"No brand")}}function et(a,r){if(a&1&&(e(0,"div",49),p(1,tt,8,3,"div",50),e(2,"div",51)(3,"p",52),n(4,"Total alerts"),t(),e(5,"p",53),n(6),t()()()),a&2){let i=f(2).ngIf;o(),c("ngForOf",i.data.lowStock.slice(0,4)),o(5),x("",i.data.stats.lowStockCount," items below threshold")}}function nt(a,r){a&1&&(e(0,"div",48),n(1,"No low-stock products right now."),t())}function it(a,r){if(a&1&&(S(0),e(1,"div",6)(2,"header",7)(3,"div")(4,"p",8),n(5,"Admin overview"),t(),e(6,"h1",9),n(7,"Operations dashboard"),t(),e(8,"p",10),n(9," Live operational stats sourced from your catalog and team records. "),t()(),e(10,"div",11)(11,"button",12),n(12,"Export report"),t(),e(13,"button",13),n(14,"Create update"),t()()(),e(15,"div",14)(16,"div",15)(17,"div",16)(18,"span",17),n(19,"Total Solutions"),t(),e(20,"span",18),n(21,"hub"),t()(),e(22,"div",19)(23,"span",20),n(24),t(),e(25,"span",21),n(26),t()(),e(27,"div",22),C(28,"div",23),t()(),e(29,"div",15)(30,"div",16)(31,"span",17),n(32,"Product Catalog"),t(),e(33,"span",18),n(34,"inventory_2"),t()(),e(35,"div",19)(36,"span",20),n(37),t(),e(38,"span",24),n(39),t()(),e(40,"div",25)(41,"span",26),n(42,"stacked_line_chart"),t(),n(43),t()(),e(44,"div",15)(45,"div",16)(46,"span",17),n(47,"Team Members"),t(),e(48,"span",18),n(49,"groups"),t()(),e(50,"div",19)(51,"span",20),n(52),t(),e(53,"span",27),n(54),t()(),e(55,"div",28),p(56,W,4,2,"div",29),t()(),e(57,"div",15)(58,"div",16)(59,"span",17),n(60,"Catalog Health"),t(),e(61,"span",30),n(62,"monitor_heart"),t()(),e(63,"div",19)(64,"span",31),n(65),t(),e(66,"span",27),n(67),t()(),e(68,"div",25)(69,"span",26),n(70,"sync"),t(),n(71),_(72,"date"),t()()(),e(73,"div",32)(74,"div",33)(75,"div",34)(76,"h3",35),n(77,"Recent activity"),t(),e(78,"p",36),n(79,"Latest categories and brands added to the catalog."),t()(),p(80,Y,2,1,"div",37)(81,Z,2,0,"ng-template",null,1,h),t(),e(83,"div",38)(84,"div",34)(85,"h3",35),n(86,"Inventory alerts"),t(),e(87,"p",36),n(88,"Products that need attention."),t()(),p(89,et,7,2,"div",39)(90,nt,2,0,"ng-template",null,2,h),t()()(),y()),a&2){let i=v(82),s=v(91),l=f().ngIf;o(24),g(l.data.stats.totalSolutions),o(2),x("",l.data.stats.featuredSolutions," featured"),o(2),M("width",l.data.stats.totalSolutions?l.data.stats.activeSolutions/l.data.stats.totalSolutions*100:0,"%"),o(9),g(l.data.stats.totalProducts),o(2),x("",l.data.stats.lowStockCount," low stock"),o(4),E(" ",l.data.stats.totalCategories," categories \xB7 ",l.data.stats.totalBrands," brands "),o(9),g(l.data.stats.totalTeamMembers),o(2),x("",l.data.stats.leadershipCount," leadership"),o(2),c("ngForOf",l.data.teamMembers.slice(0,4)),o(9),x("",l.data.stats.activeBrands," active"),o(2),x("",l.data.stats.activeCategories," active categories"),o(4),x(" Updated ",w(72,18,l.data.updatedAt,"shortTime")," "),o(9),c("ngIf",l.data.recentActivity.length)("ngIfElse",i),o(9),c("ngIf",l.data.lowStock.length)("ngIfElse",s)}}function at(a,r){if(a&1&&(e(0,"div",57),n(1),t()),a&2){let i=f().ngIf;o(),x(" ",i.error||"Unable to load dashboard data."," ")}}function rt(a,r){if(a&1&&(S(0),p(1,it,92,21,"ng-container",5)(2,at,2,1,"ng-template",null,0,h),y()),a&2){let i=r.ngIf,s=v(3);o(),c("ngIf",i.data)("ngIfElse",s)}}var K=class a{solutionService=b(z);productService=b(q);categoryService=b(G);brandService=b(H);teamService=b(J);dashboard$=A({solutions:this.solutionService.getSolutions(),products:this.productService.getProducts(),categories:this.categoryService.getCategories(),brands:this.brandService.getBrands(),teamMembers:this.teamService.getTeamMembers(),lowStock:this.productService.getLowStock()}).pipe(D(({solutions:r,products:i,categories:s,brands:l,teamMembers:d,lowStock:u})=>{let m=this.buildStats({solutions:r,products:i,categories:s,brands:l,teamMembers:d,lowStock:u});return{data:{updatedAt:new Date,stats:m,recentActivity:this.buildActivity(s,l),lowStock:u,teamMembers:d},error:null}}),T(r=>I({data:null,error:r?.error?.message||r?.message||"Failed to load dashboard data."})));buildStats(r){let i=r.solutions.filter(m=>m.isActive).length,s=r.solutions.filter(m=>m.isFeatured).length,l=r.brands.filter(m=>m.isActive).length,d=r.categories.filter(m=>m.isActive).length,u=r.teamMembers.filter(m=>m.isLeadership).length;return{totalSolutions:r.solutions.length,featuredSolutions:s,activeSolutions:i,totalProducts:r.products.length,lowStockCount:r.lowStock.length,totalBrands:r.brands.length,activeBrands:l,totalCategories:r.categories.length,activeCategories:d,totalTeamMembers:r.teamMembers.length,leadershipCount:u}}buildActivity(r,i){let s=r.map(d=>({title:`New category added: ${d.name}`,meta:"Category update",createdAt:d.createdAt,icon:"category",accent:"bg-blue-50 text-primary"})),l=i.map(d=>({title:`Brand onboarded: ${d.name}`,meta:"Brand update",createdAt:d.createdAt,icon:"verified",accent:"bg-green-50 text-green-600"}));return[...s,...l].filter(d=>d.createdAt).sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime()).slice(0,4)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=B({type:a,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["dashboardError",""],["noActivity",""],["noStockAlerts",""],["fallbackInitials",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"flex","flex-col","gap-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-sm","font-semibold","text-slate-400","uppercase","tracking-[0.3em]"],[1,"text-2xl","md:text-3xl","font-bold","text-slate-900"],[1,"text-sm","text-slate-500","mt-2"],[1,"flex","items-center","gap-3"],[1,"rounded-lg","border","border-slate-200","px-4","py-2","text-sm","font-semibold","text-slate-600","hover:border-primary","hover:text-primary","transition"],[1,"rounded-lg","bg-primary","px-4","py-2","text-sm","font-semibold","text-white","shadow-lg","shadow-primary/20"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-4","gap-6"],[1,"rounded-2xl","border","border-slate-200","bg-white","p-6","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-semibold","text-slate-500"],[1,"material-symbols-outlined","text-primary"],[1,"mt-4","flex","items-end","justify-between"],[1,"text-3xl","font-bold","text-slate-900"],[1,"text-xs","font-semibold","text-green-500"],[1,"mt-4","h-2","rounded-full","bg-slate-100"],[1,"h-2","rounded-full","bg-primary"],[1,"text-xs","font-semibold","text-amber-500"],[1,"mt-4","flex","items-center","gap-2","text-xs","text-slate-500"],[1,"material-symbols-outlined","text-base"],[1,"text-xs","font-semibold","text-slate-400"],[1,"mt-4","flex","-space-x-3"],["class","h-8 w-8 rounded-full border-2 border-white overflow-hidden bg-slate-200 flex items-center justify-center text-[10px] font-semibold text-slate-600",4,"ngFor","ngForOf"],[1,"material-symbols-outlined","text-green-500"],[1,"text-3xl","font-bold","text-green-500"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],[1,"xl:col-span-2","rounded-2xl","border","border-slate-200","bg-white","shadow-sm"],[1,"p-6","border-b","border-slate-100"],[1,"font-bold","text-slate-900"],[1,"text-sm","text-slate-500","mt-1"],["class","p-6 space-y-6",4,"ngIf","ngIfElse"],[1,"rounded-2xl","border","border-slate-200","bg-white","shadow-sm"],["class","p-6 space-y-4",4,"ngIf","ngIfElse"],[1,"h-8","w-8","rounded-full","border-2","border-white","overflow-hidden","bg-slate-200","flex","items-center","justify-center","text-[10px]","font-semibold","text-slate-600"],[1,"h-full","w-full","object-cover",3,"src","alt"],[1,"p-6","space-y-6"],["class","flex gap-4 items-start",4,"ngFor","ngForOf"],[1,"flex","gap-4","items-start"],[1,"w-9","h-9","rounded-full","flex","items-center","justify-center",3,"ngClass"],[1,"text-sm","text-slate-900","font-semibold"],[1,"text-xs","text-slate-400","mt-1"],[1,"p-6","text-sm","text-slate-500"],[1,"p-6","space-y-4"],["class","flex items-start justify-between gap-4",4,"ngFor","ngForOf"],[1,"rounded-xl","border","border-slate-100","bg-slate-50","p-4"],[1,"text-xs","text-slate-500","uppercase","tracking-[0.2em]"],[1,"text-sm","font-semibold","text-slate-800","mt-2"],[1,"flex","items-start","justify-between","gap-4"],[1,"text-sm","font-semibold","text-slate-800"],[1,"text-xs","text-slate-400"],[1,"rounded-2xl","border","border-red-100","bg-red-50","p-6","text-sm","text-red-600"]],template:function(i,s){i&1&&(p(0,rt,4,2,"ng-container",4),_(1,"async")),i&2&&c("ngIf",P(1,1,s.dashboard$))},dependencies:[R,j,N,$,O,L,U],encapsulation:2})};export{K as DashboardComponent};
