import{a as D}from"./chunk-L2LK7ZFX.js";import{a as W}from"./chunk-S3NPW5DK.js";import{a as z}from"./chunk-GAVR2D5O.js";import{a as T,b as B,c as N,f as O,h as j,i as F,j as L,k as Q,m as U}from"./chunk-SANEUAC2.js";import{Da as w,Ha as b,Hb as E,Ib as V,Lb as k,Na as m,Oa as i,Ob as I,Pa as r,T as u,U as p,Wa as P,Xa as y,Ya as s,a as h,db as n,eb as f,fb as C,gb as S,ib as g,jb as x,kb as _,ob as M,qb as A,ra as c,ya as v}from"./chunk-JDCDSAQ7.js";function q(l,d){l&1&&(i(0,"span",20),n(1,"Inactive"),r())}function G(l,d){if(l&1){let e=P();i(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),n(4),r(),i(5,"p",13),n(6),r()(),b(7,q,2,0,"span",14),r(),i(8,"div",15),n(9," Price: "),i(10,"span",16),n(11),M(12,"number"),r()(),i(13,"div",15),n(14," Stock: "),i(15,"span",16),n(16),r()(),i(17,"div",17)(18,"button",18),y("click",function(){let t=u(e).$implicit,o=s();return p(o.openModal(t))}),n(19,"Edit"),r(),i(20,"button",19),y("click",function(){let t=u(e).$implicit,o=s();return p(o.deleteProduct(t.id))}),n(21,"Remove"),r()()()}if(l&2){let e=d.$implicit;c(4),f(e.name),c(2),S("",e.categoryName||"Uncategorized"," \xB7 ",e.brandName||"No brand"),c(),m("ngIf",!e.isActive),c(4),f(A(12,6,e.price,"1.0-0")),c(5),f(e.stockQuantity)}}function H(l,d){if(l&1&&(i(0,"option",32),n(1),r()),l&2){let e=d.$implicit;m("ngValue",e.id),c(),f(e.name)}}function J(l,d){if(l&1&&(i(0,"option",32),n(1),r()),l&2){let e=d.$implicit;m("ngValue",e.id),c(),f(e.name)}}function K(l,d){if(l&1){let e=P();i(0,"div",21)(1,"div",22)(2,"div",23)(3,"h3",24),n(4),r(),i(5,"button",25),y("click",function(){u(e);let t=s();return p(t.closeModal())}),i(6,"span",5),n(7,"close"),r()()(),i(8,"div",26)(9,"div",27)(10,"div",28)(11,"label",29),n(12,"Product Name"),r(),i(13,"input",30),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.name,t)||(o.currentProduct.name=t),p(t)}),r()(),i(14,"div")(15,"label",29),n(16,"Category"),r(),i(17,"select",31),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.categoryId,t)||(o.currentProduct.categoryId=t),p(t)}),i(18,"option",32),n(19,"Select category"),r(),b(20,H,2,2,"option",33),r()(),i(21,"div")(22,"label",29),n(23,"Brand"),r(),i(24,"select",31),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.brandId,t)||(o.currentProduct.brandId=t),p(t)}),i(25,"option",32),n(26,"Select brand"),r(),b(27,J,2,2,"option",33),r()(),i(28,"div")(29,"label",29),n(30,"Price"),r(),i(31,"input",34),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.price,t)||(o.currentProduct.price=t),p(t)}),r()(),i(32,"div")(33,"label",29),n(34,"Stock Quantity"),r(),i(35,"input",34),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.stockQuantity,t)||(o.currentProduct.stockQuantity=t),p(t)}),r()(),i(36,"div",28)(37,"label",29),n(38,"Image URLs"),r(),i(39,"input",35),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.imageUrls,t)||(o.currentProduct.imageUrls=t),p(t)}),r()(),i(40,"div",28)(41,"label",29),n(42,"Description"),r(),i(43,"textarea",36),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.description,t)||(o.currentProduct.description=t),p(t)}),r()()(),i(44,"div",37)(45,"input",38),_("ngModelChange",function(t){u(e);let o=s();return x(o.currentProduct.isActive,t)||(o.currentProduct.isActive=t),p(t)}),r(),i(46,"label",39),n(47,"Active Product"),r()()(),i(48,"div",40)(49,"button",41),y("click",function(){u(e);let t=s();return p(t.closeModal())}),n(50,"Cancel"),r(),i(51,"button",42),y("click",function(){u(e);let t=s();return p(t.saveProduct())}),n(52,"Save Product"),r()()()()}if(l&2){let e=s();c(4),C("",e.currentProduct.id?"Edit":"Add"," Product"),c(9),g("ngModel",e.currentProduct.name),c(4),g("ngModel",e.currentProduct.categoryId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.categories),c(4),g("ngModel",e.currentProduct.brandId),c(),m("ngValue",void 0),c(2),m("ngForOf",e.brands),c(4),g("ngModel",e.currentProduct.price),c(4),g("ngModel",e.currentProduct.stockQuantity),c(4),g("ngModel",e.currentProduct.imageUrls),c(4),g("ngModel",e.currentProduct.description),c(2),g("ngModel",e.currentProduct.isActive)}}var R=class l{constructor(d,e,a){this.productService=d;this.categoryService=e;this.brandService=a}products=[];categories=[];brands=[];isModalOpen=!1;currentProduct={};ngOnInit(){this.loadReferences(),this.loadProducts()}loadProducts(){this.productService.getCatalogProducts().subscribe(d=>this.products=d)}loadReferences(){this.categoryService.getCategories().subscribe(d=>this.categories=d),this.brandService.getBrands().subscribe(d=>this.brands=d)}openModal(d=null){this.currentProduct=d?h({},d):{isActive:!0,price:0,stockQuantity:0},this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveProduct(){let d={name:this.currentProduct.name??"",description:this.currentProduct.description,price:Number(this.currentProduct.price??0),categoryId:this.currentProduct.categoryId??"",brandId:this.currentProduct.brandId??"",stockQuantity:Number(this.currentProduct.stockQuantity??0),imageUrls:this.currentProduct.imageUrls??"",isActive:this.currentProduct.isActive};this.currentProduct.id?this.productService.updateProduct(this.currentProduct.id,d).subscribe(()=>{this.loadProducts(),this.closeModal()}):this.productService.createProduct(d).subscribe(()=>{this.loadProducts(),this.closeModal()})}deleteProduct(d){confirm("Are you sure you want to remove this product?")&&this.productService.deleteProduct(d).subscribe(()=>this.loadProducts())}static \u0275fac=function(e){return new(e||l)(v(D),v(z),v(W))};static \u0275cmp=w({type:l,selectors:[["app-admin-products"]],decls:14,vars:2,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-500","text-sm"],[1,"bg-primary","text-white","px-5","py-2.5","rounded-lg","text-sm","font-bold","shadow-md","hover:bg-blue-600","transition-colors","flex","items-center","gap-2",3,"click"],[1,"material-symbols-outlined"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-6"],["class","bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-3 hover:shadow-md transition-shadow relative",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-navy-blue/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border","border-gray-100","flex","flex-col","gap-3","hover:shadow-md","transition-shadow","relative"],[1,"flex","items-start","justify-between","gap-4"],[1,"min-w-0"],[1,"font-bold","text-gray-800","truncate"],[1,"text-sm","text-gray-500"],["class","px-1.5 py-0.5 rounded-md bg-amber-50 text-amber-600 text-[10px] font-bold uppercase",4,"ngIf"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-gray-800"],[1,"flex","gap-2"],[1,"text-xs","font-bold","text-primary","hover:underline",3,"click"],[1,"text-xs","font-bold","text-red-500","hover:underline",3,"click"],[1,"px-1.5","py-0.5","rounded-md","bg-amber-50","text-amber-600","text-[10px]","font-bold","uppercase"],[1,"fixed","inset-0","bg-navy-blue/60","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-2xl","overflow-hidden"],[1,"p-6","border-b","border-gray-100","flex","justify-between","items-center","bg-gray-50"],[1,"text-xl","font-bold","text-gray-800"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"p-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-1"],["placeholder","Product name",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],[1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","placeholder","0",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],["placeholder","https://image1.jpg, https://image2.jpg",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],["rows","3","placeholder","Short product summary",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-3"],["type","checkbox","id","productActive",1,"size-4","rounded","border-gray-300","text-primary","focus:ring-primary",3,"ngModelChange","ngModel"],["for","productActive",1,"text-sm","font-bold","text-gray-700"],[1,"p-6","bg-gray-50","flex","gap-3","justify-end"],[1,"px-6","py-2","rounded-lg","border","border-gray-200","text-gray-600","font-bold","hover:bg-white","transition-all",3,"click"],[1,"px-6","py-2","rounded-lg","bg-primary","text-white","font-bold","hover:bg-blue-600","shadow-lg","shadow-primary/20","transition-all",3,"click"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),n(4,"Manage Products"),r(),i(5,"p",3),n(6,"Create, update, or remove catalog products"),r()(),i(7,"button",4),y("click",function(){return a.openModal()}),i(8,"span",5),n(9,"add_shopping_cart"),r(),n(10," Add Product "),r()(),i(11,"div",6),b(12,G,22,9,"div",7),r(),b(13,K,53,13,"div",8),r()),e&2&&(c(12),m("ngForOf",a.products),c(),m("ngIf",a.isModalOpen))},dependencies:[I,E,V,U,L,Q,B,j,T,F,N,O,k],encapsulation:2})};export{R as AdminProductsComponent};
