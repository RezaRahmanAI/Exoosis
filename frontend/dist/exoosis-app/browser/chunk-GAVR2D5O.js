import{J as g,N as c,Tb as u,Yb as b,a as s,h as p,l,o as i,w as a,z as o}from"./chunk-JDCDSAQ7.js";var h=class n{constructor(e){this.api=e}loadingSubject=new p(!1);errorSubject=new p(null);loading$=this.loadingSubject.asObservable();error$=this.errorSubject.asObservable();getCategories(e){let t=new u({fromObject:s(s(s({},e?.search?{search:e.search}:{}),e?.page?{page:e.page}:{}),e?.pageSize?{pageSize:e.pageSize}:{})});return this.loadingSubject.next(!0),this.errorSubject.next(null),this.api.get("/categories",t).pipe(i(r=>r.data??[]),a(r=>this.handleError(r)),o(()=>this.loadingSubject.next(!1)))}getCategoryById(e){return this.loadingSubject.next(!0),this.errorSubject.next(null),this.api.get(`/categories/${e}`).pipe(i(t=>t.data),a(t=>this.handleError(t)),o(()=>this.loadingSubject.next(!1)))}createCategory(e){return this.loadingSubject.next(!0),this.errorSubject.next(null),this.api.post("/categories",e).pipe(i(t=>t.data),a(t=>this.handleError(t)),o(()=>this.loadingSubject.next(!1)))}updateCategory(e,t){return this.loadingSubject.next(!0),this.errorSubject.next(null),this.api.put(`/categories/${e}`,t).pipe(i(r=>r.data),a(r=>this.handleError(r)),o(()=>this.loadingSubject.next(!1)))}deleteCategory(e){return this.loadingSubject.next(!0),this.errorSubject.next(null),this.api.delete(`/categories/${e}`).pipe(i(t=>t.data),a(t=>this.handleError(t)),o(()=>this.loadingSubject.next(!1)))}handleError(e){let t=e.error?.message||e.message||"Failed to load categories.";return this.errorSubject.next(t),l(()=>e)}static \u0275fac=function(t){return new(t||n)(c(b))};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};export{h as a};
