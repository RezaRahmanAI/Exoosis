import{b as W,c as P,f as L,m as N}from"./chunk-SANEUAC2.js";import{Da as S,Ha as b,Hb as A,Ib as V,Na as h,Oa as i,Ob as I,Pa as n,Qa as k,T as c,U as p,Wa as v,Xa as u,Xb as T,Ya as m,Yb as O,a as y,b as w,db as a,eb as E,fb as _,ib as g,jb as x,kb as f,pa as C,ra as s,ya as M}from"./chunk-JDCDSAQ7.js";function F(d,o){if(d&1&&(i(0,"span"),a(1),n()),d&2){let e=m().$implicit;s(),_(" | ",e.company)}}function R(d,o){if(d&1){let e=v();i(0,"div",9)(1,"div",10),k(2,"img",11),i(3,"div",12)(4,"p",13),a(5),n(),i(6,"p",14),a(7),b(8,F,2,1,"span",15),n()(),i(9,"div",16)(10,"button",17),u("click",function(){let t=c(e).$implicit,l=m();return p(l.openModal(t))}),a(11,"Edit"),n(),i(12,"button",18),u("click",function(){let t=c(e).$implicit,l=m();return p(l.deleteTestimonial(t.id))}),a(13,"Remove"),n()()(),i(14,"p",19),a(15),n()()}if(d&2){let e=o.$implicit;s(2),h("src",e.image,C),s(3),E(e.author),s(2),_(" ",e.role),s(),h("ngIf",e.company),s(7),_("\u201C",e.quote,"\u201D")}}function j(d,o){if(d&1){let e=v();i(0,"div",20)(1,"div",21)(2,"div",22)(3,"h3",23),a(4),n(),i(5,"button",24),u("click",function(){c(e);let t=m();return p(t.closeModal())}),i(6,"span",5),a(7,"close"),n()()(),i(8,"div",25)(9,"div",26)(10,"div")(11,"label",27),a(12,"Author"),n(),i(13,"input",28),f("ngModelChange",function(t){c(e);let l=m();return x(l.currentTestimonial.author,t)||(l.currentTestimonial.author=t),p(t)}),n()(),i(14,"div")(15,"label",27),a(16,"Role"),n(),i(17,"input",29),f("ngModelChange",function(t){c(e);let l=m();return x(l.currentTestimonial.role,t)||(l.currentTestimonial.role=t),p(t)}),n()(),i(18,"div",30)(19,"label",27),a(20,"Company"),n(),i(21,"input",31),f("ngModelChange",function(t){c(e);let l=m();return x(l.currentTestimonial.company,t)||(l.currentTestimonial.company=t),p(t)}),n()()(),i(22,"div")(23,"label",27),a(24,"Quote"),n(),i(25,"textarea",32),f("ngModelChange",function(t){c(e);let l=m();return x(l.currentTestimonial.quote,t)||(l.currentTestimonial.quote=t),p(t)}),n()(),i(26,"div")(27,"label",27),a(28,"Photo URL"),n(),i(29,"input",33),f("ngModelChange",function(t){c(e);let l=m();return x(l.currentTestimonial.image,t)||(l.currentTestimonial.image=t),p(t)}),n()()(),i(30,"div",34)(31,"button",35),u("click",function(){c(e);let t=m();return p(t.closeModal())}),a(32,"Cancel"),n(),i(33,"button",36),u("click",function(){c(e);let t=m();return p(t.saveTestimonial())}),a(34,"Save Testimonial"),n()()()()}if(d&2){let e=m();s(4),_("",e.currentTestimonial.id?"Edit":"Add"," Testimonial"),s(9),g("ngModel",e.currentTestimonial.author),s(4),g("ngModel",e.currentTestimonial.role),s(4),g("ngModel",e.currentTestimonial.company),s(4),g("ngModel",e.currentTestimonial.quote),s(4),g("ngModel",e.currentTestimonial.image)}}var q=class d{constructor(o){this.api=o}testimonials=[];isModalOpen=!1;currentTestimonial={};mockStorageKey="exoosis_mock_testimonials";ngOnInit(){this.loadTestimonials()}loadTestimonials(){if(T.useMockData){this.testimonials=this.loadMockTestimonials();return}this.api.get("/testimonials").subscribe(o=>this.testimonials=o)}openModal(o=null){this.currentTestimonial=o?y({},o):{image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAvOFJbtXss0-oOURmaN1XCNQ5v3AnbTlbAzq45HxpDt2bLlHmFJvFRP08mC7jebApLqIa5LeuXEprsCCfgmTIQQT5mV7m3k8zT-FSSo8Wf7R2b98lk3irtXZdM5xVN2HLaH7Rx68cFE5wenKrf2VtrPoCgJfT-wKs8v2ApTlSjzuPhsGLuw7pP395_VBJkS7CoW5sWG7VQRQ8XGugo5Mdj2Ul1bc0oVahkLkIYG8tnEKOIfYlQq3uI7_ftO1P_FRCWxpq5gJ85M7hP"},this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveTestimonial(){if(T.useMockData){let o=this.loadMockTestimonials();if(this.currentTestimonial.id){let e=o.map(r=>r.id===this.currentTestimonial.id?this.currentTestimonial:r);this.saveMockTestimonials(e)}else{let e=o.length?Math.max(...o.map(t=>t.id))+1:1,r=w(y({},this.currentTestimonial),{id:e});this.saveMockTestimonials([r,...o])}this.loadTestimonials(),this.closeModal();return}this.currentTestimonial.id?this.api.put(`/testimonials/${this.currentTestimonial.id}`,this.currentTestimonial).subscribe(()=>{this.loadTestimonials(),this.closeModal()}):this.api.post("/testimonials",this.currentTestimonial).subscribe(()=>{this.loadTestimonials(),this.closeModal()})}deleteTestimonial(o){if(confirm("Are you sure you want to remove this testimonial?")){if(T.useMockData){let e=this.loadMockTestimonials().filter(r=>r.id!==o);this.saveMockTestimonials(e),this.loadTestimonials();return}this.api.delete(`/testimonials/${o}`).subscribe(()=>this.loadTestimonials())}}loadMockTestimonials(){let o=localStorage.getItem(this.mockStorageKey);if(!o){let e=[{id:1,quote:"The EXOSISTECH team helped us modernize our operations in record time.",author:"Nadia Rahman",role:"COO",company:"Bright Logistics",image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=facearea&w=200&h=200&q=80"},{id:2,quote:"Reliable hardware bundles and a proactive support team.",author:"Tahmid Hasan",role:"IT Manager",company:"Vertex Bank",image:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=facearea&w=200&h=200&q=80"}];return localStorage.setItem(this.mockStorageKey,JSON.stringify(e)),e}try{return JSON.parse(o)}catch(e){return[]}}saveMockTestimonials(o){localStorage.setItem(this.mockStorageKey,JSON.stringify(o))}static \u0275fac=function(e){return new(e||d)(M(O))};static \u0275cmp=S({type:d,selectors:[["app-admin-testimonials"]],decls:14,vars:2,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","justify-between","items-center","gap-4"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-500","text-sm"],[1,"bg-primary","text-white","px-5","py-2.5","rounded-lg","text-sm","font-bold","shadow-md","hover:bg-blue-600","transition-colors","flex","items-center","gap-2",3,"click"],[1,"material-symbols-outlined"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["class","bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-4 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-navy-blue/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border","border-gray-100","flex","flex-col","gap-4","hover:shadow-md","transition-shadow"],[1,"flex","items-start","gap-4"],[1,"size-14","rounded-xl","object-cover","border","border-gray-100","bg-gray-50",3,"src"],[1,"flex-1","min-w-0"],[1,"text-sm","font-bold","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],[4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-bold","text-primary","hover:underline",3,"click"],[1,"text-xs","font-bold","text-red-500","hover:underline",3,"click"],[1,"text-sm","text-gray-600","leading-relaxed","line-clamp-4"],[1,"fixed","inset-0","bg-navy-blue/60","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-2xl","overflow-hidden"],[1,"p-6","border-b","border-gray-100","flex","justify-between","items-center","bg-gray-50"],[1,"text-xl","font-bold","text-gray-800"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"p-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-1"],["placeholder","Client name",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],["placeholder","e.g. CTO",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],[1,"md:col-span-2"],["placeholder","Company or organization",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],["rows","4","placeholder","Client feedback...",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],["placeholder","https://...",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-200","focus:border-primary","outline-none",3,"ngModelChange","ngModel"],[1,"p-6","bg-gray-50","flex","gap-3","justify-end"],[1,"px-6","py-2","rounded-lg","border","border-gray-200","text-gray-600","font-bold","hover:bg-white","transition-all",3,"click"],[1,"px-6","py-2","rounded-lg","bg-primary","text-white","font-bold","hover:bg-blue-600","shadow-lg","shadow-primary/20","transition-all",3,"click"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),a(4,"Testimonials"),n(),i(5,"p",3),a(6,"Curate client feedback for the homepage showcase"),n()(),i(7,"button",4),u("click",function(){return r.openModal()}),i(8,"span",5),a(9,"add_comment"),n(),a(10," Add Testimonial "),n()(),i(11,"div",6),b(12,R,16,5,"div",7),n(),b(13,j,35,6,"div",8),n()),e&2&&(s(12),h("ngForOf",r.testimonials),s(),h("ngIf",r.isModalOpen))},dependencies:[I,A,V,N,W,P,L],encapsulation:2})};export{q as AdminTestimonialsComponent};
