<main class="bg-white dark:bg-background-dark min-h-screen">
  <app-page-header
    title="Browse product categories"
    description="Explore category-focused bundles for infrastructure, security, and productivity. Jump straight into a category or view the full catalog.">
    <nav pageHeaderBreadcrumbs aria-label="Breadcrumb" class="flex">
      <ol class="inline-flex items-center space-x-1 text-sm text-slate-500 dark:text-slate-400">
        <li class="inline-flex items-center">
          <a class="inline-flex items-center gap-1 hover:text-primary" routerLink="/">
            <span class="material-symbols-outlined text-lg">home</span>
            Home
          </a>
        </li>
        <li class="flex items-center">
          <span class="material-symbols-outlined text-slate-400 text-lg">chevron_right</span>
          <span class="ml-1 font-semibold text-navy-blue dark:text-white">Categories</span>
        </li>
      </ol>
    </nav>
    <a
      pageHeaderActions
      class="rounded-full border border-slate-200 bg-white px-5 py-2 text-xs font-semibold uppercase tracking-wide text-slate-600 shadow-sm transition hover:border-primary hover:text-primary dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200"
      routerLink="/products">
      View all products
    </a>
    <a
      pageHeaderActions
      class="rounded-full bg-primary px-5 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-blue-600"
      routerLink="/contact">
      Talk to sales
    </a>
  </app-page-header>

  <section class="page-container pb-16">
    <div *ngIf="isLoading" class="flex items-center justify-center py-20">
      <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"></div>
    </div>

    <div *ngIf="errorMessage" class="rounded-2xl border border-red-200 bg-red-50 p-6 text-sm text-red-600">
      {{ errorMessage }}
    </div>

    <div *ngIf="!isLoading && !errorMessage" class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
      <article *ngFor="let category of categoryCards"
        class="group flex h-full flex-col rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-primary/40 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900">
        <div class="flex items-start justify-between gap-4">
          <div class="flex items-center gap-4">
            <div
              class="flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 overflow-hidden text-primary">
              <img *ngIf="category.imageUrl" [src]="category.imageUrl" class="w-full h-full object-cover">
              <span *ngIf="!category.imageUrl" class="material-symbols-outlined text-2xl">category</span>
            </div>
            <div>
              <p class="text-xs font-semibold uppercase tracking-wider text-primary">Category</p>
              <h2 class="text-lg font-bold text-navy-blue dark:text-white">{{ category.name }}</h2>
            </div>
          </div>
          <span
            class="rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600 dark:bg-slate-800 dark:text-slate-200">
            {{ category.count }} products
          </span>
        </div>

        <p class="mt-4 text-sm text-slate-500 dark:text-slate-300">
          {{ category.description }}
        </p>

        <div class="mt-4 flex flex-wrap gap-2">
          <span *ngFor="let brand of category.brands"
            class="rounded-full border border-slate-200 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300">
            {{ brand }}
          </span>
        </div>

        <div class="mt-auto pt-6 flex flex-wrap gap-3">
          <a class="rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-primary hover:text-primary dark:border-slate-700 dark:text-slate-200"
            [routerLink]="['/products']" [queryParams]="{ category: category.name }">
            View category
          </a>
          <a class="rounded-full bg-primary px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-blue-600"
            routerLink="/products">
            Browse products
          </a>
        </div>
      </article>
    </div>
  </section>
</main>
